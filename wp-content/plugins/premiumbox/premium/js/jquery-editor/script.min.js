jQuery(function(l){function o(t,e,n){if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,n);else if(t.createTextRange){var r=t.createTextRange();r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",e),r.select()}}function t(t){var e=t.find("textarea.premium_editor_textarea").val(),n=0,r=(e=function(t){return t=(t=(t=(t=l.trim(t)).replace(/(^\s*)|(\s*$)/gi,"")).replace(/[ ]{2,}/gi," ")).replace(/\n /,"\n")}(e)).length;0<r&&(n=e.split(" ").length),t.find(".premium_editor_words span").html(n),t.find(".premium_editor_symb span").html(r)}l(document).on("click",".js_editor_tag",function(){var t=l(this).parents(".premium_editor").find("textarea.premium_editor_textarea"),e=l.trim(l(this).find(".premium_editor_tag_start").val()),n=l.trim(l(this).find(".premium_editor_tag_end").val()),r=parseInt(t.prop("selectionStart")),a=parseInt(t.prop("selectionEnd")),s=t.val(),i="";return r==a?0<n.length?l(this).hasClass("open_tag")?(l(this).removeClass("open_tag"),i=s.substr(0,r)+n+s.substr(a,s.length-r),t.val(i),o(t.get(0),r+n.length,r+n.length)):(l(this).addClass("open_tag"),i=s.substr(0,r)+e+s.substr(a,s.length-r),t.val(i),o(t.get(0),r+e.length,r+e.length)):(i=s.substr(0,r)+e+s.substr(a,s.length-r),t.val(i),o(t.get(0),r+e.length,r+e.length)):0<n.length?l(this).hasClass("open_tag")?(l(this).removeClass("open_tag"),i=s.substr(0,a)+n+s.substr(a,s.length-a),t.val(i),o(t.get(0),a+n.length,a+n.length)):(i=s.substr(0,r)+e+s.substr(r,a-r)+n+s.substr(a,s.length-a),t.val(i),o(t.get(0),a+e.length+n.length,a+e.length+n.length)):(i=s.substr(0,r)+e+s.substr(r,s.length-r),t.val(i),o(t.get(0),r+e.length,r+e.length)),t.trigger("change"),!1}),l(".pn_word_count").each(function(){t(l(this))}),l(document).on("change",".pn_word_count textarea.premium_editor_textarea",function(){t(l(this).parents(".premium_editor"))}),l(document).on("keyup",".pn_word_count textarea.premium_editor_textarea",function(){t(l(this).parents(".premium_editor"))})});